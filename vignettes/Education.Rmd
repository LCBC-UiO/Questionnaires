---
title: "Education"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Education}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
devtools::load_all(".")
library(dplyr)
```

```{r setup}
library(Questionnaires)
```

Education variables are one of the more complicated variabled in the MOAS, as they have been asked in several different ways and can be coded in a multitude of ways. This is even more complicated by the lifespan aspect of our data, where not all participants have been attending school for the same number of years despite completing mandatory schooling in Norway. While the education variables in the MOAS attempt to reflect the real educational levels of the participants, the changes in the Norwegian school system means the variables need to be interpreted with care.

The categorical variables are nice because they treat all participants the same not matter which shcool system they were under. They are also gross simplifications. The numerical columns might be more precise, but participants interpret these differently, and as they are them selves asked to count their years of education. So while more fine grained, these also pose difficulties. 

# Norwegian school history
In Norway, a law for 9 years of mandatory schooling was implemented in 1969. 
Before this, there was a (largely) 7 year primary school (folkeskole) in most districts. 
After 1969 mandatory school (grunnskole) was implemented which was split into two parts primary school (barneskolen, years 1-6) and secondary school (ungdsomsskolen, year 7-9).  

## M-74
In 1974, a school reform called "Mønsterplanen" (M74) was implemented as a regulation of education. 
This was an effort to get the schooling in the various districts to become more equal, but still had large focus on the teachers choosing what materials in schools were to be taught. 
Certain subjects were made mandatory, while the curriculum was decided more by the teachers.
English was made mandatory for all, and arts and crafts were introduced.

## Reforms in 1987 og 1997
In 1987 a new plan was implemented, which more precicely dictated what curriculum  should be used in the schools. One of the primary reasons for the change was the view that it had become more diffiult to grow up and that the schools should compensate for some of this. Schools should now represent a protective environment and culture against the new waves in society. Important elemts in M87 was care, work on attitudes and class environments.

Only 10  years later a new reform in primary school was implemented, L97, where the mandatory school was extended to 10 years, and children started school 1 year earlier (at 6 years of age rather than 10). 

## Sources 
Tønnessen (1995): Norsk utdanningshistorie. En innføring. 
Høigård & Ruge (1971): Den norske skolens historie. En oversikt.


# MOAS data

| MOAS variable | Explanation |
|----|----|
| Edu_Years |	Education Years to highest completed |
| Edu_Total |	Education Years of total education rounded down to closest integer |
| Edu_Coded_unknown |	Education Coded - unknown |
| Edu_Coded4 |	Education Coded 4 categories |
| Edu_Coded10 |	Education Coded 10 categories |
| Edu_Desc |	Education Free text description |

The functions created in this package is to make it transparent and easier to work with MOAS functions, particularly the categorical ones.
All the functions start with `edu`, and should have names to indicate what they do.

`edu4_factorize` and `edu10_factorize` will make a factor out of what in the MOAS are columns `Edu_Coded4` and `Edu_Coded10`, even if these have data that have not been imported correcty (comination of integers and strings). The factors it will return will have the correct labels, and their levels will correspond to the number of years generally needed to complete said education.

| Edu_Coded4 | Years |
|----|----|
| Primary school (9 years) | 9 |
| High school | 12 |
| University/University college (< 4 years) | 16 |
| University/University college (> 4 years)") | 19  |

| Edu_Coded10 | Years |
|----|----|
| Pre-school/No schooling | 0 |
| Primary school (6 years) | 6 |
| Secondary school (9 years) | 9 |
| High school (12 years) | 12 |
| High school diploma (13 years) | 13 |
| High school addition (14 years) | 14 |
| Lower level University/University college degree (16 years) | 16 |
| Upper level University/University college (19 years) | 19 |
| Ph.D. (21 years) | 21 |


```{r}
edu4_factorize(c("3", "High school", "University/University college (> 4 years)", 
"University/University college (> 4 years)", "University/University college (> 4 years)", 
"University/University college (> 4 years)"))

edu10_factorize(c(7,7,8,4,2,5))
```

Once the variables are in factors, you can get the year equivalence of the education category by the `to_year` functions.

```{r}
edu4_factorize(c("3", "High school", "University/University college (> 4 years)", 
"University/University college (> 4 years)", "University/University college (> 4 years)", 
"University/University college (> 4 years)")) %>% 
  edu4_to_years()

edu10_factorize(c(7,7,8,4,2,5))%>% 
  edu10_to_years()
```

Since `Edu_Coded10` has many more categories than `Edu_Coded4` and they have not been collected simultaneously, you can also reduce the 10 categories to 4 by the function `edu10_reduce`. The categories are reduced by the following heuristic:

| Edu_Coded10 | Edu_Coded4 |
|----|----|
| Pre-school/No schooling | NA |
| Primary school (6 years) | Primary school (9 years) |
| Secondary school (9 years) | Primary school (9 years) |
| High school (12 years) | High school |
| High school diploma (13 years) | High school |
| High school addition (14 years) | High school |
| Lower level University/University college degree (16 years) | University/University college (< 4 years) |
| Upper level University/University college (19 years) | University/University college (> 4 years) |
| Ph.D. (21 years) | University/University college (> 4 years) |

```{r}
edu10_factorize(c(7,7,8,4,2,5))%>% 
  edu10_to_years() %>% 
  edu10_reduce()
```

Lastly, because some of our participants are children, using their education is not possible as they are still completing lower-level education. In these cases it is nice to have a variable that actually spans educational information from participants and parents for kids, for easier reporting and analysis. For this we can use the information we have from parents to fill in gpas in pediatric data. 
The rule for this filler is Participant - Mother - Father, so that only those missing all of these will have `NA` in the data.
The columns this is done in are called `Edu_Compiled`, and there are three of them:

`Edu_Compiled_Coded4` - 4 category coded education from participant, mother, or father  
`Edu_Compiled_Years` - Year approximation of `Edu_Compiled_Coded4` 
`Edu_Compiled_Source` - The source of the two above, one of "Participant", "Mother", or "Father".




